generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  // url      = env("DATABASE_URL")
}

model User {
  id            String    @id
  name          String
  email         String    @unique
  emailVerified Boolean   @default(false)
  image         String?
  role          String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @default(now()) @updatedAt
  accounts      Account[]
  addresses     Address[]
  Cart          Cart[]
  orders        Order[]
  sessions      Session[]

  reviews Review[]

  // Spin System Relations
  spinOrders    SpinOrder[]
  spinQuota     SpinQuota?
  spinConfig    UserSpinConfig?
  spinHistories SpinHistory[]

  @@map("user")
}

model Session {
  id        String   @id
  expiresAt DateTime
  token     String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  ipAddress String?
  userAgent String?
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("session")
}

model Account {
  id                    String    @id
  accountId             String
  providerId            String
  userId                String
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("account")
}

model Verification {
  id         String   @id
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @default(now()) @updatedAt

  @@map("verification")
}

model Category {
  id        String    @id @default(uuid())
  name      String
  status    String    @default("active")
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  Product   Product[]
}

model Product {
  id            String          @id @default(uuid())
  title         String
  lowStock      Float
  sku           String?
  description   String
  cod           Boolean         @default(false)
  cost          Float           @default(0)
  stock         Float
  status        String          @default("active")
  totalSold     Int             @default(0)
  type          ProductType     @default(WEIGHT)
  unitLabel     String          @default("‡∏Å‡∏£‡∏±‡∏°")
  createdAt     DateTime        @default(now())
  updatedAt     DateTime        @updatedAt
  categoryId    String
  category      Category        @relation(fields: [categoryId], references: [id])
  ProductImage  ProductImage[]
  ProductWeight ProductWeight[]
  Cart          Cart[]
  OrderItem     OrderItem[]

  reviews Review[]
}

model ProductWeight {
  id        String      @id @default(uuid())
  name      String?
  weight    Float
  basePrice Float
  price     Float
  sold      Int         @default(0)
  productId String
  product   Product     @relation(fields: [productId], references: [id])
  Cart      Cart[]
  OrderItem OrderItem[]
}

model ProductImage {
  id        String   @id @default(uuid())
  url       String
  fileId    String
  isMain    Boolean  @default(false)
  productId String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  product   Product  @relation(fields: [productId], references: [id])
}

model RecommendedBanner {
  id        String   @id @default(uuid())
  imageUrl  String
  name      String?
  fileId    String?
  createdAt DateTime @default(now())
}

model Cart {
  id        String        @id @default(uuid())
  productId String
  weightId  String
  userId    String
  quantity  Int
  createdAt DateTime      @default(now()) // ‚Üê ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ
  updatedAt DateTime      @updatedAt
  product   Product       @relation(fields: [productId], references: [id])
  user      User          @relation(fields: [userId], references: [id], onDelete: Cascade)
  weight    ProductWeight @relation(fields: [weightId], references: [id])

  @@unique([userId, productId, weightId])
  @@map("cart")
}

model Address {
  id          String   @id @default(uuid())
  userId      String
  label       String?
  recipient   String
  phone       String
  line1       String
  line2       String?
  province    String
  district    String
  subdistrict String
  postalCode  String
  isDefault   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  orders      Order[]

  @@map("address")
}

model Order {
  id                  String         @id @default(uuid())
  orderNumber         String         @unique
  userId              String
  addressId           String?
  status              OrderStatus    @default(PENDING_PAYMENT)
  paymentMethod       PaymentMethod
  paymentStatus       PaymentStatus  @default(PENDING)
  subtotal            Float
  shippingFee         Float          @default(0)
  depositAmount       Float          @default(0)
  totalAmount         Float
  requiresCodDeposit  Boolean        @default(false)
  shippingName        String
  shippingPhone       String
  shippingLine1       String
  shippingLine2       String?
  shippingProvince    String
  shippingDistrict    String
  shippingSubdistrict String
  shippingPostalCode  String
  trackingNumber      String?
  notes               String?
  createdAt           DateTime       @default(now())
  updatedAt           DateTime       @updatedAt
  carrier             String?
  address             Address?       @relation(fields: [addressId], references: [id])
  user                User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  items               OrderItem[]
  payments            OrderPayment[]

  @@map("order")
}

model OrderItem {
  id             String          @id @default(uuid())
  orderId        String
  productId      String?
  weightId       String?
  productTitle   String
  productSku     String?
  weightValue    Float?
  unitPrice      Float
  basePrice      Float?
  quantity       Int
  subtotal       Float
  trackingNumber String?
  carrier        String?
  codAvailable   Boolean         @default(false)
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  order          Order           @relation(fields: [orderId], references: [id], onDelete: Cascade)
  product        Product?        @relation(fields: [productId], references: [id])
  weight         ProductWeight?  @relation(fields: [weightId], references: [id])
  status         OrderItemStatus @default(NORMAL) // üëà ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö

  @@map("order_item")
}

model OrderPayment {
  id                String        @id @default(uuid())
  orderId           String
  method            PaymentMethod
  amount            Float
  slipUrl           String?
  slipFileId        String?
  status            PaymentStatus @default(PENDING)
  paidAt            DateTime?
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt
  order             Order         @relation(fields: [orderId], references: [id], onDelete: Cascade)
  // ‚úÖ [‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà] ‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏∑‡∏ô‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
  refundBank        String? // ‡∏ä‡∏∑‡πà‡∏≠‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠ "PROMPTPAY"
  refundAccountName String? // ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
  refundAccountNo   String? // ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç)

  @@map("order_payment")
}

// Model Review
model Review {
  id        String   @id @default(uuid())
  rating    Int // ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô 1-5
  comment   String? // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  productId String
  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô 1 User ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡∏ã‡πâ‡∏≥ (Optional)
  @@unique([userId, productId])
}

enum OrderItemStatus {
  NORMAL
  OUT_OF_STOCK
  REPLACED
}

enum OrderStatus {
  PENDING_PAYMENT
  PENDING_VERIFICATION
  PROCESSING
  SHIPPED
  COMPLETED
  CANCELLED
}

enum PaymentMethod {
  PROMPTPAY
  COD
}

enum PaymentStatus {
  PENDING
  WAITING_VERIFICATION
  APPROVED
  REJECTED
  // ‚úÖ [‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà] ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
  PENDING_REFUND // ‡∏£‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô‡∏Ñ‡∏∑‡∏ô
  REFUNDED // ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß
}

// ‚úÖ 1. ‡πÄ‡∏û‡∏¥‡πà‡∏° Enum ‡∏ô‡∏µ‡πâ
enum ProductType {
  WEIGHT
  UNIT
}

// ===== SPIN SYSTEM =====
enum SpinOrderStatus {
  PENDING_PAYMENT
  WAITING_VERIFICATION
  APPROVED
  REJECTED
  CANCELLED
}

enum SpinPaymentMethod {
  PROMPTPAY
  MANUAL_TRANSFER
}

enum SpinPackageStatus {
  ACTIVE
  INACTIVE
}

enum SpinResultStatus {
  WIN
  LOSE
  CANCELLED
}

enum SpinQuotaStatus {
  ACTIVE
  SUSPENDED
}

enum SpinQuotaAction {
  ADD
  REMOVE
  RESET
}

model SpinPackage {
  id         String            @id @default(uuid())
  name       String
  spinAmount Int // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏∏‡∏ô
  price      Float
  imageUrl   String
  fileId     String?
  status     SpinPackageStatus @default(ACTIVE)
  sortOrder  Int               @default(0)
  createdAt  DateTime          @default(now())
  updatedAt  DateTime          @updatedAt

  orders SpinOrder[]

  @@map("spin_package")
}

model SpinOrder {
  id            String            @id @default(uuid())
  orderNumber   String            @unique
  userId        String
  packageId     String
  spinAmount    Int // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏∏‡∏ô
  totalAmount   Float
  status        SpinOrderStatus   @default(PENDING_PAYMENT)
  paymentMethod SpinPaymentMethod
  note          String?
  createdAt     DateTime          @default(now())
  updatedAt     DateTime          @updatedAt

  user     User               @relation(fields: [userId], references: [id], onDelete: Cascade)
  package  SpinPackage        @relation(fields: [packageId], references: [id])
  payments SpinOrderPayment[]

  @@map("spin_order")
}

model SpinOrderPayment {
  id          String        @id @default(uuid())
  spinOrderId String
  amount      Float
  slipUrl     String?
  slipFileId  String?
  status      PaymentStatus @default(PENDING) // ‡πÉ‡∏ä‡πâ PaymentStatus ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö OrderPayment
  paidAt      DateTime?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt

  order SpinOrder @relation(fields: [spinOrderId], references: [id], onDelete: Cascade)

  @@map("spin_order_payment")
}

model SpinQuota {
  id        String          @id @default(uuid())
  userId    String          @unique
  total     Int             @default(0) // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏∏‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  used      Int             @default(0) // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
  status    SpinQuotaStatus @default(ACTIVE)
  updatedAt DateTime        @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("spin_quota")
}

model UserSpinConfig {
  id            String    @id @default(uuid())
  userId        String    @unique
  winRateBoost  Float     @default(0) // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ä‡∏ô‡∏∞ (%)
  loseRateBoost Float     @default(0) // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÅ‡∏û‡πâ (%)
  spinCount     Int       @default(0) // ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏∏‡∏ô
  winCooldown   Int       @default(0) // ‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏µ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏ä‡∏ô‡∏∞‡πÑ‡∏î‡πâ
  lastWinAt     DateTime?
  forceWin      Boolean   @default(false) // ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏ä‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
  canWin        Boolean   @default(false) // ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏ä‡∏ô‡∏∞‡πÑ‡∏î‡πâ (‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥)
  disabledSpin  Boolean   @default(false) // ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡∏õ‡∏¥‡∏ô
  updatedAt     DateTime  @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("user_spin_config")
}

model SpinHistory {
  id           String           @id @default(uuid())
  userId       String
  slotIndex    Int // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏∏‡∏ô‡πÑ‡∏î‡πâ
  result       SpinResultStatus
  prizeName    String? // ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (‡∏ñ‡πâ‡∏≤‡∏ä‡∏ô‡∏∞)
  createdAt    DateTime         @default(now())
  isClaimed    Boolean          @default(false) // ‡πÄ‡∏û‡∏¥‡πà‡∏°: ‡∏Å‡∏î‡∏£‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
  claimOrderId String? // ‡πÄ‡∏û‡∏¥‡πà‡∏°: ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏´‡∏≤ Order ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, createdAt(sort: Desc)])
  @@map("spin_history")
}

model SpinSlotImage {
  id        String   @id @default(uuid())
  imageUrl  String // URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û Slot
  fileId    String // ID ‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
  label     String // ‡∏ä‡∏∑‡πà‡∏≠/‡∏õ‡πâ‡∏≤‡∏¢‡∏Å‡∏≥‡∏Å‡∏±‡∏ö (‡πÄ‡∏ä‡πà‡∏ô "üíé", "üçÄ")
  sortOrder Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("spin_slot_image")
}

// generator client {
//   provider = "prisma-client-js"
//   output   = "../src/generated/prisma"
// }

// datasource db {
//   provider = "postgresql"
//   url      = env("DATABASE_URL")
// }

// ////////////////////////////
// /// CORE USER / AUTH
// ////////////////////////////

// model User {
//   id            String   @id
//   name          String
//   email         String   @unique
//   emailVerified Boolean  @default(false)
//   image         String?
//   role          String?
//   createdAt     DateTime @default(now())
//   updatedAt     DateTime @default(now()) @updatedAt

//   accounts  Account[]
//   addresses Address[]
//   Cart      Cart[]
//   orders    Order[]
//   sessions  Session[]

//   // ===== Spin relations (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° + FIX) =====
//   spinOrders    SpinOrder[]
//   spinQuota     SpinQuota?
//   spinConfigs   UserSpinConfig[]
//   spinHistories SpinHistory[]

//   // FIX: required opposite relations
//   spinQuotaLogs      SpinQuotaLog[] @relation("SpinQuotaUser")
//   spinQuotaAdminLogs SpinQuotaLog[] @relation("SpinQuotaAdmin")

//   @@map("user")
// }

// model Session {
//   id        String   @id
//   expiresAt DateTime
//   token     String   @unique
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
//   ipAddress String?
//   userAgent String?
//   userId    String
//   user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

//   @@map("session")
// }

// model Account {
//   id                    String    @id
//   accountId             String
//   providerId            String
//   userId                String
//   accessToken           String?
//   refreshToken          String?
//   idToken               String?
//   accessTokenExpiresAt  DateTime?
//   refreshTokenExpiresAt DateTime?
//   scope                 String?
//   password              String?
//   createdAt             DateTime  @default(now())
//   updatedAt             DateTime  @updatedAt
//   user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)

//   @@map("account")
// }

// model Verification {
//   id         String   @id
//   identifier String
//   value      String
//   expiresAt  DateTime
//   createdAt  DateTime @default(now())
//   updatedAt  DateTime @default(now()) @updatedAt

//   @@map("verification")
// }

// ////////////////////////////
// /// PRODUCT / ORDER SYSTEM
// ////////////////////////////

// model Category {
//   id        String    @id @default(uuid())
//   name      String
//   status    String    @default("active")
//   createdAt DateTime  @default(now())
//   updatedAt DateTime  @updatedAt
//   Product   Product[]
// }

// model Product {
//   id            String          @id @default(uuid())
//   title         String
//   lowStock      Float
//   sku           String?
//   description   String
//   cod           Boolean         @default(false)
//   cost          Float           @default(0)
//   stock         Float
//   status        String          @default("active")
//   createdAt     DateTime        @default(now())
//   updatedAt     DateTime        @updatedAt
//   categoryId    String
//   category      Category        @relation(fields: [categoryId], references: [id])
//   ProductImage  ProductImage[]
//   ProductWeight ProductWeight[]
//   Cart          Cart[]
//   OrderItem     OrderItem[]
// }

// model ProductWeight {
//   id        String      @id @default(uuid())
//   weight    Float
//   basePrice Float
//   price     Float
//   sold      Int         @default(0)
//   productId String
//   product   Product     @relation(fields: [productId], references: [id])
//   Cart      Cart[]
//   OrderItem OrderItem[]
// }

// model ProductImage {
//   id        String   @id @default(uuid())
//   url       String
//   fileId    String
//   isMain    Boolean  @default(false)
//   productId String
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
//   product   Product  @relation(fields: [productId], references: [id])
// }

// model RecommendedBanner {
//   id        String   @id @default(uuid())
//   imageUrl  String
//   name      String?
//   fileId    String?
//   createdAt DateTime @default(now())
// }

// model Cart {
//   id        String        @id @default(uuid())
//   productId String
//   weightId  String
//   userId    String
//   quantity  Int
//   createdAt DateTime      @default(now())
//   updatedAt DateTime      @updatedAt
//   product   Product       @relation(fields: [productId], references: [id])
//   user      User          @relation(fields: [userId], references: [id], onDelete: Cascade)
//   weight    ProductWeight @relation(fields: [weightId], references: [id])

//   @@unique([userId, productId, weightId])
//   @@map("cart")
// }

// model Address {
//   id          String   @id @default(uuid())
//   userId      String
//   label       String?
//   recipient   String
//   phone       String
//   line1       String
//   line2       String?
//   province    String
//   district    String
//   subdistrict String
//   postalCode  String
//   isDefault   Boolean  @default(false)
//   createdAt   DateTime @default(now())
//   updatedAt   DateTime @updatedAt
//   user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
//   orders      Order[]

//   @@map("address")
// }

// model Order {
//   id                  String         @id @default(uuid())
//   orderNumber         String         @unique
//   userId              String
//   addressId           String?
//   status              OrderStatus    @default(PENDING_PAYMENT)
//   paymentMethod       PaymentMethod
//   paymentStatus       PaymentStatus  @default(PENDING)
//   subtotal            Float
//   shippingFee         Float          @default(0)
//   depositAmount       Float          @default(0)
//   totalAmount         Float
//   requiresCodDeposit  Boolean        @default(false)
//   shippingName        String
//   shippingPhone       String
//   shippingLine1       String
//   shippingLine2       String?
//   shippingProvince    String
//   shippingDistrict    String
//   shippingSubdistrict String
//   shippingPostalCode  String
//   trackingNumber      String?
//   notes               String?
//   createdAt           DateTime       @default(now())
//   updatedAt           DateTime       @updatedAt
//   carrier             String?
//   address             Address?       @relation(fields: [addressId], references: [id])
//   user                User           @relation(fields: [userId], references: [id], onDelete: Cascade)
//   items               OrderItem[]
//   payments            OrderPayment[]

//   @@map("order")
// }

// model OrderItem {
//   id           String         @id @default(uuid())
//   orderId      String
//   productId    String?
//   weightId     String?
//   productTitle String
//   productSku   String?
//   weightValue  Float?
//   unitPrice    Float
//   basePrice    Float?
//   quantity     Int
//   subtotal     Float
//   codAvailable Boolean        @default(false)
//   createdAt    DateTime       @default(now())
//   updatedAt    DateTime       @updatedAt
//   order        Order          @relation(fields: [orderId], references: [id], onDelete: Cascade)
//   product      Product?       @relation(fields: [productId], references: [id])
//   weight       ProductWeight? @relation(fields: [weightId], references: [id])

//   @@map("order_item")
// }

// model OrderPayment {
//   id         String        @id @default(uuid())
//   orderId    String
//   method     PaymentMethod
//   amount     Float
//   slipUrl    String?
//   slipFileId String?
//   status     PaymentStatus @default(PENDING)
//   paidAt     DateTime?
//   createdAt  DateTime      @default(now())
//   updatedAt  DateTime      @updatedAt
//   order      Order         @relation(fields: [orderId], references: [id], onDelete: Cascade)

//   @@map("order_payment")
// }

// enum OrderStatus {
//   PENDING_PAYMENT
//   PENDING_VERIFICATION
//   PROCESSING
//   SHIPPED
//   COMPLETED
//   CANCELLED
// }

// enum PaymentMethod {
//   PROMPTPAY
//   COD
// }

// enum PaymentStatus {
//   PENDING
//   WAITING_VERIFICATION
//   APPROVED
//   REJECTED
// }

// ////////////////////////////
// /// SPIN SYSTEM
// ////////////////////////////

// enum SpinOrderStatus {
//   PENDING_PAYMENT
//   WAITING_VERIFICATION
//   APPROVED
//   REJECTED
//   CANCELLED
// }

// enum SpinPaymentMethod {
//   PROMPTPAY
//   MANUAL_TRANSFER
// }

// enum SpinPackageStatus {
//   ACTIVE
//   INACTIVE
// }

// enum SpinCampaignStatus {
//   DRAFT
//   ACTIVE
//   PAUSED
//   ENDED
// }

// enum SpinSlotStatus {
//   ACTIVE
//   INACTIVE
// }

// enum SpinPrizeType {
//   PRODUCT
//   DISCOUNT
//   POINT
//   NONE
// }

// enum SpinResultStatus {
//   WIN
//   LOSE
//   CANCELLED
// }

// enum SpinQuotaStatus {
//   ACTIVE
//   SUSPENDED
// }

// enum SpinQuotaAction {
//   ADD
//   REMOVE
//   RESET
// }

// model SpinPackage {
//   id         String            @id @default(uuid())
//   name       String
//   spinAmount Int
//   price      Float
//   imageUrl   String
//   fileId     String?
//   status     SpinPackageStatus @default(ACTIVE)
//   sortOrder  Int               @default(0)
//   createdAt  DateTime          @default(now())
//   updatedAt  DateTime          @updatedAt

//   orders SpinOrder[]
// }

// model SpinOrder {
//   id            String            @id @default(uuid())
//   orderNumber   String            @unique
//   userId        String
//   packageId     String
//   spinAmount    Int
//   totalAmount   Float
//   status        SpinOrderStatus   @default(PENDING_PAYMENT)
//   paymentMethod SpinPaymentMethod
//   note          String?
//   createdAt     DateTime          @default(now())
//   updatedAt     DateTime          @updatedAt

//   user     User               @relation(fields: [userId], references: [id], onDelete: Cascade)
//   package  SpinPackage        @relation(fields: [packageId], references: [id])
//   payments SpinOrderPayment[]
// }

// model SpinOrderPayment {
//   id          String          @id @default(uuid())
//   spinOrderId String
//   amount      Float
//   slipUrl     String?
//   slipFileId  String?
//   status      SpinOrderStatus @default(PENDING_PAYMENT)
//   paidAt      DateTime?
//   createdAt   DateTime        @default(now())
//   updatedAt   DateTime        @updatedAt

//   order SpinOrder @relation(fields: [spinOrderId], references: [id], onDelete: Cascade)
// }

// model SpinCampaign {
//   id        String             @id @default(uuid())
//   name      String
//   status    SpinCampaignStatus @default(DRAFT)
//   winRate   Int                @default(50) // ‚úÖ % ‡∏ä‡∏ô‡∏∞ (0‚Äì100)
//   createdAt DateTime           @default(now())

//   slots     SpinSlot[]
//   histories SpinHistory[]
// }

// model SpinPrize {
//   id        String        @id @default(uuid())
//   name      String
//   type      SpinPrizeType
//   imageUrl  String
//   fileId    String?
//   isActive  Boolean       @default(true)
//   createdAt DateTime      @default(now())

//   slots           SpinSlot[]
//   histories       SpinHistory[]
//   forcedByConfigs UserSpinConfig[]
// }

// model SpinSlot {
//   id         String         @id @default(uuid())
//   campaignId String
//   slotIndex  Int
//   prizeId    String
//   status     SpinSlotStatus @default(ACTIVE)

//   campaign SpinCampaign @relation(fields: [campaignId], references: [id])
//   prize    SpinPrize    @relation(fields: [prizeId], references: [id])

//   @@unique([campaignId, slotIndex])
// }

// model SpinQuota {
//   id        String          @id @default(uuid())
//   userId    String          @unique
//   total     Int             @default(0)
//   used      Int             @default(0)
//   status    SpinQuotaStatus @default(ACTIVE)
//   updatedAt DateTime        @updatedAt

//   user User @relation(fields: [userId], references: [id], onDelete: Cascade)
// }

// model SpinQuotaLog {
//   id        String          @id @default(uuid())
//   userId    String
//   adminId   String
//   action    SpinQuotaAction
//   amount    Int
//   reason    String?
//   createdAt DateTime        @default(now())

//   user  User @relation("SpinQuotaUser", fields: [userId], references: [id])
//   admin User @relation("SpinQuotaAdmin", fields: [adminId], references: [id])
// }

// model UserSpinConfig {
//   id            String    @id @default(uuid())
//   userId        String    @unique
//   winRateBoost  Float     @default(0)
//   loseRateBoost Float     @default(0)
//   spinCount     Int       @default(0) // ‚úÖ ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏∏‡∏ô
//   winCooldown   Int       @default(0) // ‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏µ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏ä‡∏ô‡∏∞‡πÑ‡∏î‡πâ
//   lastWinAt     DateTime?
//   forcePrizeId  String?
//   disabledSpin  Boolean   @default(false)
//   updatedAt     DateTime  @updatedAt

//   user  User       @relation(fields: [userId], references: [id], onDelete: Cascade)
//   prize SpinPrize? @relation(fields: [forcePrizeId], references: [id])
// }

// model SpinHistory {
//   id         String           @id @default(uuid())
//   userId     String
//   campaignId String
//   prizeId    String?
//   slotIndex  Int
//   result     SpinResultStatus
//   createdAt  DateTime         @default(now())

//   user     User         @relation(fields: [userId], references: [id])
//   campaign SpinCampaign @relation(fields: [campaignId], references: [id])
//   prize    SpinPrize?   @relation(fields: [prizeId], references: [id])
// }
